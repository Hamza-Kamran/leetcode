trigger:
- main

pool:
  name: 'TestingPool'

steps:
- checkout: self
  clean: true

- script: echo "Starting build..."
  displayName: "Build Step"

- script: |
    echo "Running tests for App version: $(appVersion)"
    echo "All tests passed!"
  displayName: "Test Step"

- script: |
    echo "DEBUG: Build.SourcesDirectory=$(Build.SourcesDirectory)"
    echo "DEBUG: Build.ArtifactStagingDirectory=$(Build.ArtifactStagingDirectory)"
    dir "$(Build.SourcesDirectory)"
    dir "$(Build.ArtifactStagingDirectory)"
  displayName: "Debug: list source & staging dirs"

- task: PublishPipelineArtifact@1
  displayName: "Publish pipeline artifact (recommended)"
  inputs:
    targetPath: '$(Build.SourcesDirectory)'
    artifact: 'demo'
    publishLocation: 'pipeline'
